---
phase: 07-documentation-testing
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md]
autonomous: true

must_haves:
  truths:
    - "README.md explains what 3GS is and why curated sources matter"
    - "README.md shows how to run locally with cargo run"
    - "README.md shows how to connect an MCP client with JSON config"
    - "README.md documents all three HTTP endpoints (POST /mcp, GET /health, GET /registry)"
    - "README.md lists all four MCP tools with descriptions"
    - "README.md includes architecture diagram showing request flow"
  artifacts:
    - path: "README.md"
      provides: "Comprehensive project documentation"
      min_lines: 150
  key_links:
    - from: "README.md"
      to: "docs/SCHEMA.md"
      via: "markdown link"
      pattern: "docs/SCHEMA.md"
    - from: "README.md"
      to: "docs/METHODOLOGY.md"
      via: "markdown link"
      pattern: "docs/METHODOLOGY.md"
    - from: "README.md"
      to: "docs/PUBKY.md"
      via: "markdown link"
      pattern: "docs/PUBKY.md"
---

<objective>
Create comprehensive README.md covering the full 3GS project: concept explanation, quickstart, API reference, MCP tools, architecture, and verification guide.

Purpose: README.md is the primary entry point for anyone discovering 3GS. It must explain the problem (SEO-gamed search results), the solution (3 curated sources per topic), and how to use it -- all in one document with links to deep-dive docs.

Output: README.md at project root
</objective>

<execution_context>
@/home/john/.claude/get-shit-done/workflows/execute-plan.md
@/home/john/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/server.rs
@src/config.rs
@src/main.rs
@src/registry/types.rs
@src/mcp/handler.rs
@src/mcp/tools.rs
@registry.json
@docs/index.html
@.env.example
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write comprehensive README.md</name>
  <files>README.md</files>
  <action>
Replace the existing one-line README.md with a comprehensive project README. Structure it as follows:

**Title & tagline:**
- `# 3 Good Sources (3GS)` with tagline: "Curated, cryptographically-signed source recommendations for AI agents"

**What & Why section:**
- Explain the problem: AI agents get SEO-gamed search results when looking for resources
- Explain the solution: 3 curated sources per topic, human-vetted, with cryptographic provenance via PKARR
- Keep it accessible to broader tech audience first, then get technical
- Professional, neutral tone throughout

**Architecture diagram (mermaid):**
- Show the request flow: Agent -> HTTP POST /mcp -> MCP Handler -> Query Matcher -> Registry -> 3 Sources
- Use mermaid format (GitHub renders it natively)
- Include labels on edges (JSON-RPC, normalize/score, ranked sources)

**Quickstart section:**
- Prerequisites: Rust 1.85+, cargo
- Clone, set REGISTRY_PATH=registry.json in .env, cargo run
- Test with curl: POST to localhost:3000/mcp with initialize request, then tools/call get_sources
- MCP client config: `{"mcpServers": {"3gs": {"url": "http://localhost:3000/mcp"}}}`

**API Endpoints section:**
- `POST /mcp` -- MCP JSON-RPC 2.0 endpoint. Show example request/response for get_sources.
- `GET /health` -- Returns `{"status": "ok", "version": "0.1.0", "pubkey": "<z-base-32>"}`.
- `GET /registry` -- Returns full registry.json for transparency.

**MCP Tools section:**
- `get_sources` -- Natural language query -> 3 ranked sources. Parameters: query (required string), threshold (optional 0.0-1.0).
- `list_categories` -- Returns all available category slugs with domain tags.
- `get_provenance` -- Returns curator identity and PKARR public key for verification.
- `get_endorsements` -- Returns endorsement list (empty in v1, scaffolded for future use).

**Configuration section:**
- Table of environment variables: REGISTRY_PATH (required), PORT (default 3000), LOG_FORMAT (pretty/json), PKARR_SECRET_KEY (optional 64-char hex), MATCH_THRESHOLD, MATCH_FUZZY_WEIGHT, MATCH_KEYWORD_WEIGHT.

**Registry Format section:**
- Brief overview of registry.json structure (version, curator, categories with 3 sources each)
- Link to docs/SCHEMA.md for complete documentation

**How It Works section:**
- Brief: Query normalization (lowercase, strip punctuation, remove stop words, normalize whitespace) -> Fuzzy matching (normalized Levenshtein across patterns, slug, name) + keyword boosting -> Threshold filter
- Link to docs/METHODOLOGY.md for full algorithm description and curation transparency

**Verification section:**
- Step 1: `curl localhost:3000/health` to get pubkey
- Step 2: Call get_provenance tool to get curator identity
- Step 3: Verify pubkey matches -- explains what this proves
- Link to docs/PUBKY.md for PKARR primer and future federation vision

**Docker section:**
- `docker build -t 3gs .`
- `docker run -p 3000:3000 -e REGISTRY_PATH=/app/registry.json 3gs`
- Brief mention of render.yaml for Render deployment

**License section:**
- MIT

Do NOT duplicate content from docs/ files -- keep it to 1-2 paragraphs per topic with links. README is the map, docs/ files are the territory.
  </action>
  <verify>
- File exists and is valid markdown: `head -5 README.md`
- Contains all required sections: grep for "Quickstart", "API Endpoints", "MCP Tools", "Architecture", "Verification", "Configuration"
- Contains mermaid diagram: grep for "```mermaid"
- Contains links to docs/: grep for "docs/SCHEMA.md", "docs/METHODOLOGY.md", "docs/PUBKY.md"
- Has substantial content: `wc -l README.md` shows 150+ lines
  </verify>
  <done>
README.md exists with concept explanation, quickstart with curl examples, all 3 endpoints documented, all 4 MCP tools documented, mermaid architecture diagram, environment variable table, and links to docs/SCHEMA.md, docs/METHODOLOGY.md, and docs/PUBKY.md.
  </done>
</task>

</tasks>

<verification>
1. `cat README.md | head -3` shows title and tagline
2. `grep -c "##" README.md` confirms multiple sections (expect 8+)
3. `grep "mermaid" README.md` confirms architecture diagram
4. `grep "docs/" README.md` confirms links to deep-dive docs
5. `grep "localhost:3000" README.md` confirms quickstart examples
6. `grep "get_sources\|list_categories\|get_provenance\|get_endorsements" README.md` confirms all 4 tools documented
</verification>

<success_criteria>
README.md is a complete project introduction that enables a developer to understand what 3GS is, run it locally, connect an MCP client, and know where to find deeper documentation -- all from one file.
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation-testing/07-01-SUMMARY.md`
</output>
